---
title: "scratch"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r}
rm(list = ls())
source("utils_feed.R")

dat <- get_data("../data/raw/ej3MkW_engagement.csv", n_entities = 100)
dt_dwell <- make_dwell_data(dat)
dt_dwell

library(fixest)
feglm(likes_1 ~ btn_likes | user_id, dt_dwell, family = "quasipoisson")
feglm(shares_1 ~ btn_shares | user_id, dt_dwell, family = "quasipoisson")
```

```{r}
d0[, unique(field)]
d1 <- d0[field == "politicalpref",]
d1[, unique(response)]
d1[, resp := substr(response, 1, 1)]
d1[, resp := as.numeric(resp)]
hist(d1$resp, main = "demrep")



d1 <- d0[field == "economicissuespref",]
d1[, unique(response)]
d1[, resp := substr(response, 1, 1)]
d1[, resp := as.numeric(resp)]
hist(d1$resp, main = "economicissuespref")

```

